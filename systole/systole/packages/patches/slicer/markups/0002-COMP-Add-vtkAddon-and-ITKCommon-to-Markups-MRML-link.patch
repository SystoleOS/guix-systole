From 71fc405f1017292155be5edb1eec909b0e379a81 Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@ous-research.no>
Date: Sat, 21 Feb 2026 19:22:37 +0100
Subject: [PATCH] COMP: Add vtkAddon and ITKCommon to Markups MRML link deps

Markups MRML uses symbols from vtkAddon (vtkCurveGenerator,
vtkAddonMathUtilities, vtkSlicerDijkstraGraphGeodesicPath,
vtkParallelTransportFrame) and from ITKCommon (slicer_itk::NumberToString
in vtkMRMLMarkupsFiducialStorageNode) that are not provided by
MRML_LIBRARIES (MRMLCore;MRMLLogic;MRMLDisplayableManager).

Add vtkAddon and ITKCommon to TARGET_LIBRARIES and pass
${vtkAddon_LIB_DIR} as LINK_DIRECTORIES so the linker can find
libvtkAddon.so which is installed in the vtkaddon package (separate
from the slicer-5.8 store path).
---
 Modules/Loadable/Markups/MRML/CMakeLists.txt | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/Modules/Loadable/Markups/MRML/CMakeLists.txt b/Modules/Loadable/Markups/MRML/CMakeLists.txt
index c49226c682..f21707b791 100644
--- a/Modules/Loadable/Markups/MRML/CMakeLists.txt
+++ b/Modules/Loadable/Markups/MRML/CMakeLists.txt
@@ -63,6 +63,11 @@ set(${KIT}_SRCS
 
 set(${KIT}_TARGET_LIBRARIES
   ${MRML_LIBRARIES}
+  # vtkAddon provides vtkCurveGenerator, vtkAddonMathUtilities,
+  # vtkSlicerDijkstraGraphGeodesicPath, vtkParallelTransportFrame
+  vtkAddon
+  # ITKCommon provides slicer_itk::NumberToString used in FiducialStorageNode
+  ITKCommon
   )
 
 #-----------------------------------------------------------------------------
@@ -72,4 +77,5 @@ SlicerMacroBuildModuleMRML(
   INCLUDE_DIRECTORIES ${${KIT}_INCLUDE_DIRECTORIES}
   SRCS ${${KIT}_SRCS}
   TARGET_LIBRARIES ${${KIT}_TARGET_LIBRARIES}
+  LINK_DIRECTORIES ${vtkAddon_LIB_DIR}
   )
-- 
2.52.0

