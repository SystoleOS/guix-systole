From 6f95b742277e778071b7aa774ac01b7b708af281 Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@ous-research.no>
Date: Sat, 21 Feb 2026 15:08:48 +0100
Subject: [PATCH] COMP: Add qMRMLWidgets to standalone module widgets link deps

qMRMLItemDelegate and other symbols from qMRMLWidgets are not resolved
transitively through qSlicerBaseQTGUI when --as-needed is active.
List qMRMLWidgets explicitly in the fallback target libraries.
---
 CMake/SlicerMacroBuildModuleWidgets.cmake | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/CMake/SlicerMacroBuildModuleWidgets.cmake b/CMake/SlicerMacroBuildModuleWidgets.cmake
index a502dea620..d4000cdd50 100644
--- a/CMake/SlicerMacroBuildModuleWidgets.cmake
+++ b/CMake/SlicerMacroBuildModuleWidgets.cmake
@@ -66,6 +66,8 @@ macro(SlicerMacroBuildModuleWidgets)
   # explicitly since the transitive chain is broken.
   # qSlicerBaseQTCore must also be listed explicitly: --as-needed prevents
   # resolving qSlicerObject symbols transitively through qSlicerBaseQTGUI.
+  # qMRMLWidgets must be listed explicitly for the same reason: symbols such
+  # as qMRMLItemDelegate are not resolved transitively through qSlicerBaseQTGUI.
   if(Slicer_GUI_LIBRARY)
     list(APPEND MODULEWIDGETS_TARGET_LIBRARIES
       ${Slicer_GUI_LIBRARY}
@@ -74,6 +76,7 @@ macro(SlicerMacroBuildModuleWidgets)
     list(APPEND MODULEWIDGETS_TARGET_LIBRARIES
       qSlicerBaseQTCore
       qSlicerBaseQTGUI
+      qMRMLWidgets
       CTKVisualizationVTKCore
       )
   endif()
-- 
2.52.0

