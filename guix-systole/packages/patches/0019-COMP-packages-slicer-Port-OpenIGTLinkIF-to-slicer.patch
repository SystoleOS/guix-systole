diff --git a/CMakeLists.txt b/CMakeLists.txt
index 910c39c..13100b3 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -17,8 +17,9 @@ set(SUPERBUILD_TOPLEVEL_PROJECT inner)
 
 #-----------------------------------------------------------------------------
 # Extension dependencies
-find_package(Slicer REQUIRED)
-include(${Slicer_USE_FILE})
+#find_package(Slicer REQUIRED)
+#include(${Slicer_USE_FILE})
+include(SlicerMacroBuildLoadableModule)
 mark_as_superbuild(Slicer_DIR)
 
 #-----------------------------------------------------------------------------
@@ -28,19 +29,21 @@ mark_as_superbuild(SlicerOpenIGTLink_USE_VP9)
 
 #-----------------------------------------------------------------------------
 # SuperBuild setup
-option(${EXTENSION_NAME}_SUPERBUILD "Build ${EXTENSION_NAME} and the projects it depends on." ON)
-mark_as_advanced(${EXTENSION_NAME}_SUPERBUILD)
-if(${EXTENSION_NAME}_SUPERBUILD)
-  include("${CMAKE_CURRENT_SOURCE_DIR}/SuperBuild.cmake")
-  return()
-endif()
+#option(${EXTENSION_NAME}_SUPERBUILD "Build ${EXTENSION_NAME} and the projects it depends on." ON)
+#mark_as_advanced(${EXTENSION_NAME}_SUPERBUILD)
+#if(${EXTENSION_NAME}_SUPERBUILD)
+#  include("${CMAKE_CURRENT_SOURCE_DIR}/SuperBuild.cmake")
+#  return()
+#endif()
 
 #-----------------------------------------------------------------------------
 # Extension modules
 add_subdirectory(OpenIGTLinkIF)
 add_subdirectory(OpenIGTLinkRemote)
 add_subdirectory(PlusRemote)
-add_subdirectory(UltrasoundRemoteControl)
+if(Slicer_USE_PYTHONQT)
+    add_subdirectory(UltrasoundRemoteControl)
+endif()
 ## NEXT_MODULE
 
 #-----------------------------------------------------------------------------
@@ -50,7 +53,8 @@ set(SlicerOpenIGTLink_CUSTOM_CONFIG "
 include(\"${OpenIGTLink_DIR}/OpenIGTLinkConfig.cmake\")
 include(\"${OpenIGTLinkIO_DIR}/OpenIGTLinkIOConfig.cmake\")
 ")
-include(${Slicer_EXTENSION_GENERATE_CONFIG})
+#include(${Slicer_EXTENSION_GENERATE_CONFIG})
+include(SlicerExtensionGenerateConfig)
 
 #-----------------------------------------------------------------------------
 # Packaging
@@ -61,4 +65,4 @@ set(${EXTENSION_NAME}_CPACK_INSTALL_CMAKE_PROJECTS "${EXTENSION_CPACK_INSTALL_CM
 list(APPEND CPACK_INSTALL_CMAKE_PROJECTS "${CMAKE_BINARY_DIR};${EXTENSION_NAME};ALL;/")
 list(APPEND CPACK_INSTALL_CMAKE_PROJECTS "${${EXTENSION_NAME}_CPACK_INSTALL_CMAKE_PROJECTS}")
 include(${CMAKE_CURRENT_SOURCE_DIR}/CMake/SlicerBlockInstallVP9.cmake)
-include(${Slicer_EXTENSION_CPACK})
+#include(${Slicer_EXTENSION_CPACK})
diff --git a/OpenIGTLinkIF/CMakeLists.txt b/OpenIGTLinkIF/CMakeLists.txt
index 716487f..b7ad1b0 100644
--- a/OpenIGTLinkIF/CMakeLists.txt
+++ b/OpenIGTLinkIF/CMakeLists.txt
@@ -73,6 +73,7 @@ set(MODULE_TARGET_LIBRARIES
   vtkSlicerOpenIGTLinkIFModuleMRML
   qSlicerOpenIGTLinkIFModuleWidgets
   ${MRML_LIBRARIES}
+  vtkSlicerMarkupsModuleMRML
   )
 
 set(MODULE_RESOURCES
